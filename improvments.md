
## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- ‚úÖ **FastAPI —Å–µ—Ä–≤–∏—Å** —Å endpoint `/get_flights`, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π `ServiceResponse`
- ‚úÖ **–¢–µ—Å—Ç—ã** —Å –º–æ–∫–∞–º–∏ –Ω–∞ `avia_api` (20 —Ç–µ—Å—Ç–æ–≤, –ø–æ–∫—Ä—ã—Ç–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤)
- ‚úÖ **Ruff** –¥–ª—è –ª–∏–Ω—Ç–∏–Ω–≥–∞ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
- ‚úÖ **Poetry** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- ‚úÖ **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** Python —Å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º (`pid`, —Å–æ–±—ã—Ç–∏—è)

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- ‚úÖ **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –∑–∞–ø—Ä–æ—Å–∞ `/get_flights` –Ω–∞ 3 –º–∏–Ω—É—Ç—ã (TTL-based)
- ‚úÖ **–§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏** –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ `start_task + get_res`:
  - `POST /start_search` - –∑–∞–ø—É—Å–∫ —Ñ–æ–Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏
  - `GET /get_result` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∑–∞–¥–∞—á–∏
- ‚úÖ **Docker Compose** —Ñ–∞–π–ª –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è —Ä–∞–±–æ—Ç–∞ —Å AviaApi

`AviaApi` —Å–æ–¥–µ—Ä–∂–∏—Ç –±–ª–æ–∫–∏—Ä—É—é—â–∏–π `time.sleep(15)` –≤ –º–µ—Ç–æ–¥–µ `get_chunk()`. –î–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–µ–π —Ä–∞–±–æ—Ç—ã FastAPI:

- –ë–ª–æ–∫–∏—Ä—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–∞—Ö (`threading.Thread`)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π event loop –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ—Ç–æ–∫–∞
- –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏ —á–µ—Ä–µ–∑ `queue.Queue`
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ —á–µ—Ä–µ–∑ —Å–µ–º–∞—Ñ–æ—Ä (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `FLY_SEARCH_MAX_CONCURRENT_THREADS`)

### –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

- **In-memory –∫–µ—à** (TTLCache) –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –≤ —Ä–∞–º–∫–∞—Ö –ø—Ä–æ—Ü–µ—Å—Å–∞
- **–§–∞–π–ª–æ–≤—ã–π –∫–µ—à** –¥–ª—è –∑–∞–¥–∞—á, —á—Ç–æ–±—ã –æ–Ω–∏ –±—ã–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –º–µ–∂–¥—É Gunicorn workers
- TTL: 3 –º–∏–Ω—É—Ç—ã –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤, 1 —á–∞—Å –¥–ª—è –∑–∞–¥–∞—á
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–ø–∏—Å–µ–π

### –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏

- –ó–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —á–µ—Ä–µ–∑ `asyncio.create_task`
- –°—Ç–∞—Ç—É—Å—ã –∑–∞–¥–∞—á: `PROCESSING`, `COMPLETED`, `FAILED`
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–µ—à–∏—Ä—É—é—Ç—Å—è –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ –∫–µ—à

### Production-ready —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

- **Gunicorn** —Å Uvicorn workers –¥–ª—è production
- **Docker Compose** —Å healthcheck
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (Pydantic Settings)
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## üìä –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- **20 —Ç–µ—Å—Ç–æ–≤**
- –ü–æ–∫—Ä—ã—Ç–∏–µ:
  - Unit-—Ç–µ—Å—Ç—ã –¥–æ–º–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏ (–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è, –ø–æ–∏—Å–∫)
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã API endpoints
  - –¢–µ—Å—Ç—ã –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
  - –¢–µ—Å—Ç—ã —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á

## üîÆ –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. Redis –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**: In-memory –∫–µ—à + —Ñ–∞–π–ª–æ–≤—ã–π –∫–µ—à –¥–ª—è –∑–∞–¥–∞—á

**–ü—Ä–æ–±–ª–µ–º–∞**:

- In-memory –∫–µ—à –Ω–µ —Ä–∞–∑–¥–µ–ª—è–µ—Ç—Å—è –º–µ–∂–¥—É Gunicorn workers
- –§–∞–π–ª–æ–≤—ã–π –∫–µ—à –∏–º–µ–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
- –ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Ä–≤–µ—Ä–æ–≤

**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis –∫–∞–∫ –µ–¥–∏–Ω—ã–π –∫–µ—à –¥–ª—è –≤—Å–µ—Ö workers –∏ —Å–µ—Ä–≤–µ—Ä–æ–≤

### 2. Celery –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**: –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ —á–µ—Ä–µ–∑ `asyncio.create_task` –≤ —Ç–æ–º –∂–µ –ø—Ä–æ—Ü–µ—Å—Å–µ

**–ü—Ä–æ–±–ª–µ–º–∞**:

- –ó–∞–¥–∞—á–∏ —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞
- –ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —É–ø–∞–≤—à–∏—Ö –∑–∞–¥–∞—á
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏ –æ–¥–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
- –ù–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–¥–∞—á
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Celery —Å –±—Ä–æ–∫–µ—Ä–æ–º —Å–æ–æ–±—â–µ–Ω–∏–π (Redis/RabbitMQ)
